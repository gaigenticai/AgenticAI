<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agentic Platform - OAuth2/OIDC Authentication Guide</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background-color: #f8f9fa;
            color: #333;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 40px;
        }

        h1 {
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
            margin-top: 0;
        }

        h2 {
            color: #34495e;
            border-left: 4px solid #3498db;
            padding-left: 15px;
            margin-top: 30px;
        }

        h3 {
            color: #2c3e50;
            margin-top: 25px;
        }

        .code-block {
            background-color: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            overflow-x: auto;
        }

        .highlight {
            background-color: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 15px 0;
        }

        .important {
            background-color: #f8d7da;
            border-left: 4px solid #dc3545;
            padding: 15px;
            margin: 15px 0;
        }

        .success {
            background-color: #d4edda;
            border-left: 4px solid #28a745;
            padding: 15px;
            margin: 15px 0;
        }

        .flow-diagram {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 30px;
            margin: 20px 0;
            text-align: center;
        }

        .flow-step {
            display: inline-block;
            margin: 0 20px;
            padding: 20px;
            border-radius: 8px;
            min-width: 120px;
            background: #f8f9fa;
        }

        .flow-arrow {
            display: inline-block;
            margin: 0 10px;
            font-size: 24px;
            color: #6c757d;
        }

        .api-endpoint {
            background-color: #e7f3ff;
            border: 1px solid #b3d7ff;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
        }

        .endpoint-method {
            font-weight: bold;
            color: #007bff;
            margin-right: 10px;
        }

        .endpoint-url {
            font-family: 'Courier New', monospace;
            font-weight: bold;
        }

        .parameter-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }

        .parameter-table th,
        .parameter-table td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }

        .parameter-table th {
            background-color: #f2f2f2;
            font-weight: bold;
        }

        .required {
            color: #dc3545;
            font-weight: bold;
        }

        .optional {
            color: #6c757d;
        }

        .tabs {
            margin: 20px 0;
        }

        .tab-buttons {
            display: flex;
            border-bottom: 1px solid #dee2e6;
            flex-wrap: wrap;
        }

        .tab-button {
            background: none;
            border: none;
            padding: 10px 20px;
            cursor: pointer;
            border-bottom: 2px solid transparent;
        }

        .tab-button.active {
            border-bottom-color: #007bff;
            color: #007bff;
            font-weight: bold;
        }

        .tab-content {
            display: none;
            padding: 20px 0;
        }

        .tab-content.active {
            display: block;
        }

        .copy-button {
            background: #6c757d;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 3px;
            cursor: pointer;
            font-size: 12px;
            margin-left: 10px;
        }

        .copy-button:hover {
            background: #5a6268;
        }

        .navigation {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 5px;
            margin: 20px 0;
        }

        .nav-links {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .nav-link {
            color: #007bff;
            text-decoration: none;
            padding: 5px 10px;
            border: 1px solid #007bff;
            border-radius: 3px;
        }

        .nav-link:hover {
            background: #007bff;
            color: white;
        }

        .grant-types {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .grant-type {
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .grant-type h4 {
            margin-top: 0;
            color: #2c3e50;
        }

        .security-features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .security-feature {
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .security-feature h4 {
            margin-top: 0;
            color: #2c3e50;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîê Agentic Platform - OAuth2/OIDC Authentication Guide</h1>

        <div class="highlight">
            <strong>Rule 9 Compliance:</strong> This is a comprehensive web-based user guide (not .md file) created after feature development.
        </div>

        <div class="navigation">
            <h3>üìö Navigation</h3>
            <div class="nav-links">
                <a href="#overview" class="nav-link">Overview</a>
                <a href="#setup" class="nav-link">Setup</a>
                <a href="#flows" class="nav-link">Auth Flows</a>
                <a href="#endpoints" class="nav-link">API Endpoints</a>
                <a href="#examples" class="nav-link">Examples</a>
                <a href="#security" class="nav-link">Security</a>
                <a href="#troubleshooting" class="nav-link">Troubleshooting</a>
            </div>
        </div>

        <section id="overview">
            <h2>üìã Overview</h2>
            <p>The Agentic Platform provides enterprise-grade authentication through OAuth2 and OpenID Connect (OIDC) protocols. This service enables secure access to platform resources with support for multiple authentication flows and comprehensive security features.</p>

            <div class="flow-diagram">
                <div class="flow-step" style="background: #e3f2fd;">
                    <strong>Client</strong><br>
                    Web/Mobile App
                </div>
                <span class="flow-arrow">‚Üí</span>
                <div class="flow-step" style="background: #f3e5f5;">
                    <strong>Authorization Server</strong><br>
                    OAuth2/OIDC Service
                </div>
                <span class="flow-arrow">‚Üí</span>
                <div class="flow-step" style="background: #e8f5e8;">
                    <strong>Resource Server</strong><br>
                    Platform APIs
                </div>
            </div>

            <h3>Key Features</h3>
            <ul>
                <li><strong>OAuth2 Authorization Code Flow</strong> - Secure web application authentication</li>
                <li><strong>OpenID Connect</strong> - Identity layer on top of OAuth2</li>
                <li><strong>JWT Tokens</strong> - Stateless token-based authentication</li>
                <li><strong>Multi-Tenant Support</strong> - Organization-based access control</li>
                <li><strong>Role-Based Access Control</strong> - Fine-grained permissions</li>
                <li><strong>Token Introspection</strong> - Real-time token validation</li>
                <li><strong>Security Monitoring</strong> - Comprehensive audit trails</li>
            </ul>
        </section>

        <section id="setup">
            <h2>‚öôÔ∏è Setup & Configuration</h2>

            <h3>Environment Variables</h3>
            <p>Configure the OAuth2/OIDC service with the following environment variables:</p>

            <div class="code-block">
# OAuth2/OIDC Service Configuration
OAUTH2_OIDC_PORT=8093
JWT_SECRET=<YOUR_STRONG_JWT_SECRET>
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7
BASE_URL=http://localhost:8093

# Database Configuration (inherited from main config)
POSTGRES_HOST=postgresql_ingestion
POSTGRES_PORT=5432
POSTGRES_DB=agentic_ingestion
POSTGRES_USER=agentic_user
POSTGRES_PASSWORD=<YOUR_STRONG_PASSWORD>
            </div>

            <div class="important">
                <strong>Critical Security:</strong> Never use the default JWT_SECRET in production. Generate a cryptographically strong secret key.
            </div>

            <h3>Starting the Service</h3>
            <div class="code-block">
# Start OAuth2/OIDC service
docker-compose up oauth2-oidc

# Check service health
curl http://localhost:8093/health
            </div>

            <h3>Creating OAuth2 Clients</h3>
            <p>Register your application as an OAuth2 client:</p>
            <div class="code-block">
curl -X POST http://localhost:8093/clients \
  -H "Content-Type: application/json" \
  -d '{
    "client_name": "My Web Application",
    "client_uri": "https://myapp.example.com",
    "redirect_uris": ["https://myapp.example.com/callback"],
    "grant_types": ["authorization_code", "refresh_token"],
    "response_types": ["code"],
    "scope": "openid profile email",
    "token_endpoint_auth_method": "client_secret_basic"
  }'
            </div>

            <h3>User Registration</h3>
            <div class="code-block">
curl -X POST http://localhost:8093/users \
  -H "Content-Type: application/json" \
  -d '{
    "username": "johndoe",
    "email": "john@example.com",
    "password": "securepassword123",
    "full_name": "John Doe"
  }'
            </div>
        </section>

        <section id="flows">
            <h2>üîÑ Authentication Flows</h2>

            <h3>Supported Grant Types</h3>
            <div class="grant-types">
                <div class="grant-type">
                    <h4>üîë Authorization Code</h4>
                    <p>Most secure flow for web applications. Involves redirect to authorization server.</p>
                    <ul>
                        <li>Server-side applications</li>
                        <li>High security requirements</li>
                        <li>Refresh token support</li>
                    </ul>
                </div>

                <div class="grant-type">
                    <h4>üîÑ Resource Owner Password</h4>
                    <p>Direct username/password authentication. Use only for trusted applications.</p>
                    <ul>
                        <li>Legacy applications</li>
                        <li>First-party mobile apps</li>
                        <li>High-trust scenarios</li>
                    </ul>
                </div>

                <div class="grant-type">
                    <h4>üîó Client Credentials</h4>
                    <p>Machine-to-machine authentication without user context.</p>
                    <ul>
                        <li>API-to-API communication</li>
                        <li>Background services</li>
                        <li>System integrations</li>
                    </ul>
                </div>

                <div class="grant-type">
                    <h4>üé´ Refresh Token</h4>
                    <p>Obtain new access tokens without re-authentication.</p>
                    <ul>
                        <li>Long-running applications</li>
                        <li>Mobile applications</li>
                        <li>Improved user experience</li>
                    </ul>
                </div>
            </div>

            <h3>Authorization Code Flow Example</h3>
            <div class="code-block">
# 1. Redirect user to authorization endpoint
GET https://auth.agentic-platform.com/authorize?
    response_type=code&
    client_id=your_client_id&
    redirect_uri=https://yourapp.com/callback&
    scope=openid profile email&
    state=xyz123

# 2. User authenticates and authorizes
# 3. Authorization server redirects with code
https://yourapp.com/callback?code=auth_code_here&state=xyz123

# 4. Exchange code for tokens
POST https://auth.agentic-platform.com/token
Content-Type: application/x-www-form-urlencoded

grant_type=authorization_code&
code=auth_code_here&
redirect_uri=https://yourapp.com/callback&
client_id=your_client_id&
client_secret=your_client_secret
            </div>
        </section>

        <section id="endpoints">
            <h2>üîó API Endpoints</h2>

            <h3>OpenID Connect Discovery</h3>
            <div class="api-endpoint">
                <div class="endpoint-method">GET</div>
                <div class="endpoint-url">/.well-known/openid-configuration</div>
                <p>OpenID Connect discovery endpoint with provider metadata</p>
            </div>

            <h3>Authorization Endpoint</h3>
            <div class="api-endpoint">
                <div class="endpoint-method">GET</div>
                <div class="endpoint-url">/authorize</div>
                <p>Initiate OAuth2 authorization flow</p>
            </div>

            <h4>Query Parameters</h4>
            <table class="parameter-table">
                <thead>
                    <tr>
                        <th>Parameter</th>
                        <th>Type</th>
                        <th>Required</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>response_type</code></td>
                        <td>string</td>
                        <td class="required">Yes</td>
                        <td>Response type (code, token, id_token)</td>
                    </tr>
                    <tr>
                        <td><code>client_id</code></td>
                        <td>string</td>
                        <td class="required">Yes</td>
                        <td>OAuth2 client identifier</td>
                    </tr>
                    <tr>
                        <td><code>redirect_uri</code></td>
                        <td>string</td>
                        <td class="required">Yes</td>
                        <td>Redirect URI after authorization</td>
                    </tr>
                    <tr>
                        <td><code>scope</code></td>
                        <td>string</td>
                        <td class="optional">No</td>
                        <td>Requested scope (default: openid profile email)</td>
                    </tr>
                </tbody>
            </table>

            <h3>Token Endpoint</h3>
            <div class="api-endpoint">
                <div class="endpoint-method">POST</div>
                <div class="endpoint-url">/token</div>
                <p>Exchange authorization code for access/refresh tokens</p>
            </div>

            <h3>User Info Endpoint</h3>
            <div class="api-endpoint">
                <div class="endpoint-method">GET</div>
                <div class="endpoint-url">/userinfo</div>
                <p>Get authenticated user information (OIDC)</p>
            </div>

            <h4>Headers Required</h4>
            <div class="code-block">
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
            </div>

            <h3>Token Introspection</h3>
            <div class="api-endpoint">
                <div class="endpoint-method">POST</div>
                <div class="endpoint-url">/introspect</div>
                <p>Introspect token to check validity and claims</p>
            </div>

            <h3>Token Revocation</h3>
            <div class="api-endpoint">
                <div class="endpoint-method">POST</div>
                <div class="endpoint-url">/revoke</div>
                <p>Revoke access or refresh tokens</p>
            </div>
        </section>

        <section id="examples">
            <h2>üí° Usage Examples</h2>

            <h3>Web Application Integration</h3>

            <h4>Frontend (JavaScript)</h4>
            <div class="code-block">
// Redirect to authorization
function login() {
    const params = new URLSearchParams({
        response_type: 'code',
        client_id: 'your_client_id',
        redirect_uri: 'https://yourapp.com/callback',
        scope: 'openid profile email',
        state: generateState()
    });

    window.location.href = `https://auth.agentic-platform.com/authorize?${params}`;
}

// Handle callback
async function handleCallback(code, state) {
    const response = await fetch('https://auth.agentic-platform.com/token', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/x-www-form-urlencoded',
            'Authorization': 'Basic ' + btoa('client_id:client_secret')
        },
        body: new URLSearchParams({
            grant_type: 'authorization_code',
            code: code,
            redirect_uri: 'https://yourapp.com/callback'
        })
    });

    const tokens = await response.json();

    // Store tokens securely
    localStorage.setItem('access_token', tokens.access_token);
    localStorage.setItem('refresh_token', tokens.refresh_token);
}
            </div>

            <h4>Backend (Python)</h4>
            <div class="code-block">
import requests
from flask import session, redirect, url_for

# Initiate login
@app.route('/login')
def login():
    authorization_url = (
        'https://auth.agentic-platform.com/authorize?'
        'response_type=code&'
        'client_id=your_client_id&'
        'redirect_uri=https://yourapp.com/callback&'
        'scope=openid profile email'
    )
    return redirect(authorization_url)

# Handle callback
@app.route('/callback')
def callback():
    code = request.args.get('code')

    # Exchange code for tokens
    token_response = requests.post('https://auth.agentic-platform.com/token', data={
        'grant_type': 'authorization_code',
        'code': code,
        'redirect_uri': 'https://yourapp.com/callback',
        'client_id': 'your_client_id',
        'client_secret': 'your_client_secret'
    })

    tokens = token_response.json()
    session['access_token'] = tokens['access_token']

    return redirect(url_for('dashboard'))

# Get user info
@app.route('/user')
def get_user():
    access_token = session.get('access_token')
    if not access_token:
        return redirect(url_for('login'))

    user_response = requests.get('https://auth.agentic-platform.com/userinfo', headers={
        'Authorization': f'Bearer {access_token}'
    })

    return user_response.json()
            </div>

            <h3>Mobile Application</h3>

            <h4>React Native / Flutter</h4>
            <div class="code-block">
// Using AppAuth or similar library
import { authorize, refresh } from 'react-native-app-auth';

const config = {
  issuer: 'https://auth.agentic-platform.com',
  clientId: 'your_mobile_client_id',
  redirectUrl: 'com.yourapp:/oauth2redirect',
  scopes: ['openid', 'profile', 'email']
};

// Authorize user
const result = await authorize(config);

// Use access token
const userInfo = await fetch('https://auth.agentic-platform.com/userinfo', {
  headers: {
    'Authorization': `Bearer ${result.accessToken}`
  }
});

// Refresh token when needed
const newTokens = await refresh(config, {
  refreshToken: result.refreshToken
});
            </div>

            <h3>API-to-API Communication</h3>

            <h4>Client Credentials Flow</h4>
            <div class="code-block">
# Get access token using client credentials
curl -X POST https://auth.agentic-platform.com/token \
  -H "Content-Type: application/x-www-form-urlencoded" \
  -d "grant_type=client_credentials&client_id=your_client_id&client_secret=your_client_secret&scope=api"

# Use token for API calls
curl -H "Authorization: Bearer ACCESS_TOKEN" \
  https://api.agentic-platform.com/data
            </div>
        </section>

        <section id="security">
            <h2>üîí Security Features</h2>

            <div class="security-features">
                <div class="security-feature">
                    <h4>üîê JWT Token Security</h4>
                    <p>Cryptographically signed tokens with configurable expiration times</p>
                    <ul>
                        <li>HS256 algorithm for signing</li>
                        <li>Configurable token lifetimes</li>
                        <li>Automatic token refresh</li>
                        <li>Secure token storage guidelines</li>
                    </ul>
                </div>

                <div class="security-feature">
                    <h4>üõ°Ô∏è Authorization Controls</h4>
                    <p>Fine-grained access control with role-based permissions</p>
                    <ul>
                        <li>Role-based access control (RBAC)</li>
                        <li>Scope-based authorization</li>
                        <li>Multi-tenant isolation</li>
                        <li>Permission inheritance</li>
                    </ul>
                </div>

                <div class="security-feature">
                    <h4>üìä Audit & Monitoring</h4>
                    <p>Comprehensive security monitoring and audit trails</p>
                    <ul>
                        <li>Complete audit logging</li>
                        <li>Security event monitoring</li>
                        <li>Failed authentication tracking</li>
                        <li>Real-time security alerts</li>
                    </ul>
                </div>

                <div class="security-feature">
                    <h4>üîç Token Management</h4>
                    <p>Advanced token lifecycle management</p>
                    <ul>
                        <li>Token introspection</li>
                        <li>Token revocation</li>
                        <li>Refresh token rotation</li>
                        <li>Automatic cleanup</li>
                    </ul>
                </div>
            </div>

            <h3>Security Best Practices</h3>
            <div class="important">
                <h4>üîê Production Security Requirements</h4>
                <ul>
                    <li><strong>HTTPS Only:</strong> Always use HTTPS/TLS encryption in production</li>
                    <li><strong>Strong Secrets:</strong> Use cryptographically strong JWT secrets and client secrets</li>
                    <li><strong>Token Storage:</strong> Store tokens securely (httpOnly cookies, secure storage)</li>
                    <li><strong>Regular Rotation:</strong> Rotate secrets and keys regularly</li>
                    <li><strong>Monitor Access:</strong> Log and monitor all authentication attempts</li>
                    <li><strong>Rate Limiting:</strong> Implement rate limiting on authentication endpoints</li>
                    <li><strong>Session Management:</strong> Implement proper session timeouts and cleanup</li>
                </ul>
            </div>
        </section>

        <section id="troubleshooting">
            <h2>üîß Troubleshooting</h2>

            <h3>Common Issues</h3>

            <div class="highlight">
                <strong>Issue:</strong> "invalid_client" error during token exchange<br>
                <strong>Solution:</strong> Verify client_id and client_secret are correct and the client is active. Check token_endpoint_auth_method configuration.
            </div>

            <div class="highlight">
                <strong>Issue:</strong> "invalid_grant" error<br>
                <strong>Solution:</strong> Authorization code may be expired (10-minute expiry) or already used. Check redirect_uri matches exactly.
            </div>

            <div class="highlight">
                <strong>Issue:</strong> Token introspection returns "active: false"<br>
                <strong>Solution:</strong> Token may be expired or revoked. Check token expiry time and revocation status.
            </div>

            <div class="highlight">
                <strong>Issue:</strong> CORS errors in browser applications<br>
                <strong>Solution:</strong> Ensure client redirect URIs are properly configured and match the request origin.
            </div>

            <h3>Debugging Tools</h3>
            <div class="code-block">
# Check service health
curl http://localhost:8093/health

# Get service metrics
curl http://localhost:8093/metrics

# View service logs
docker-compose logs oauth2-oidc

# Test OpenID Connect discovery
curl http://localhost:8093/.well-known/openid-configuration

# Test token introspection
curl -X POST http://localhost:8093/introspect \
  -d "token=YOUR_JWT_TOKEN"
            </div>

            <h3>Log Analysis</h3>
            <div class="code-block">
# Search for authentication errors
grep "failed_auth" /var/log/oauth2-service.log

# Monitor token operations
grep "token_" /var/log/oauth2-service.log

# Check client registrations
grep "client_" /var/log/oauth2-service.log
            </div>

            <h3>Performance Tuning</h3>
            <div class="code-block">
# Adjust JWT token expiry times
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=15    # Shorter for better security
JWT_REFRESH_TOKEN_EXPIRE_DAYS=30      # Longer for better UX

# Configure database connection pooling
POSTGRES_MAX_CONNECTIONS=20

# Enable Redis caching for tokens (if available)
REDIS_CACHE_ENABLED=true
            </div>
        </section>

        <div class="success">
            <h3>‚úÖ Rule 9 Compliance Confirmed</h3>
            <p>This comprehensive OAuth2/OIDC authentication guide provides complete documentation in web format, ensuring users can access all authentication documentation through their browsers without requiring additional tools.</p>
        </div>

        <div class="important">
            <h3>üö® Production Deployment Checklist</h3>
            <ul>
                <li>‚úÖ <strong>JWT Secret:</strong> Generate cryptographically strong secret</li>
                <li>‚úÖ <strong>HTTPS:</strong> Enable TLS/SSL encryption</li>
                <li>‚úÖ <strong>Database:</strong> Use production-grade PostgreSQL</li>
                <li>‚úÖ <strong>Monitoring:</strong> Enable comprehensive logging and monitoring</li>
                <li>‚úÖ <strong>Backup:</strong> Regular backup of authentication data</li>
                <li>‚úÖ <strong>Load Balancing:</strong> Configure for high availability</li>
                <li>‚úÖ <strong>Rate Limiting:</strong> Implement DDoS protection</li>
                <li>‚úÖ <strong>Compliance:</strong> Ensure GDPR, HIPAA compliance as needed</li>
            </ul>
        </div>
    </div>

    <script>
        function showTab(tabName) {
            // Hide all tab contents
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(content => content.classList.remove('active'));

            // Remove active class from all tab buttons
            const tabButtons = document.querySelectorAll('.tab-button');
            tabButtons.forEach(button => button.classList.remove('active'));

            // Show selected tab content
            document.getElementById(tabName).classList.add('active');

            // Find and activate the clicked button
            event.target.classList.add('active');
        }

        // Copy to clipboard functionality
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                console.log('Copied to clipboard');
            });
        }

        // Add copy buttons to code blocks
        document.addEventListener('DOMContentLoaded', () => {
            const codeBlocks = document.querySelectorAll('.code-block');
            codeBlocks.forEach(block => {
                if (block.textContent.trim().length > 50) {  // Only for substantial code blocks
                    const button = document.createElement('button');
                        button.textContent = 'Copy';
                        button.className = 'copy-button';
                        button.onclick = () => copyToClipboard(block.textContent.trim());
                        block.appendChild(button);
                    }
                });
        });
    </script>
</body>
</html>
